"use strict";
(function($window) {
  "use strict";
  var Catwalk = function Catwalk() {
    this.typecast = new $window.Catwalk.Typecast();
  };
  ($traceurRuntime.createClass)(Catwalk, {createCollection: function(name, properties) {
      return new $window.Catwalk.Collection(name, properties);
    }}, {});
  $window.Catwalk = Catwalk;
})(window);

"use strict";
(function($Catwalk, $object) {
  "use strict";
  var CATWALK_PROPERTY = '__catwalkId';
  var CatwalkCollection = function CatwalkCollection(name, blueprint) {
    this.id = 0;
    this.name = name;
    this.models = [];
    this.blueprint = $object.freeze(blueprint);
  };
  ($traceurRuntime.createClass)(CatwalkCollection, {
    getModels: $traceurRuntime.initGeneratorFunction(function $__4() {
      var $__2,
          $__3,
          model;
      return $traceurRuntime.createGeneratorInstance(function($ctx) {
        while (true)
          switch ($ctx.state) {
            case 0:
              $__2 = this.models[Symbol.iterator]();
              $ctx.state = 14;
              break;
            case 14:
              $ctx.state = (!($__3 = $__2.next()).done) ? 9 : -2;
              break;
            case 9:
              $ctx.pushTry(7, null);
              $ctx.state = 10;
              break;
            case 10:
              throw undefined;
              $ctx.state = 12;
              break;
            case 12:
              $ctx.popTry();
              $ctx.state = 14;
              break;
            case 7:
              $ctx.popTry();
              model = $ctx.storedException;
              $ctx.state = 5;
              break;
            case 5:
              model = $__3.value;
              $ctx.state = 6;
              break;
            case 6:
              $ctx.state = 2;
              return model;
            case 2:
              $ctx.maybeThrow();
              $ctx.state = 14;
              break;
            default:
              return $ctx.end();
          }
      }, $__4, this);
    }),
    addModel: function() {
      var properties = arguments[0] !== (void 0) ? arguments[0] : {};
      var model = {};
      model = this.iterateProperties(properties);
      model = this.iterateBlueprint(model);
      model[CATWALK_PROPERTY] = ++this.id;
      this.models.push($object.freeze(model));
      return model;
    },
    iterateBlueprint: function(model) {
      var $__0 = this;
      $object.keys(this.blueprint).forEach((function(property) {
        if (typeof model[property] === 'undefined') {
          var propertyHandler = $__0.blueprint[property];
          model[property] = propertyHandler('');
        }
      }));
      return model;
    },
    iterateProperties: function(properties) {
      var $__0 = this;
      var model = {};
      $object.keys(properties).forEach((function(property) {
        var value = properties[property],
            propertyHandler = $__0.blueprint[property];
        if (typeof propertyHandler === 'undefined') {
          return;
        }
        if (typeof propertyHandler === 'function') {
          value = propertyHandler(value);
        }
        model[property] = value;
      }));
      return model;
    },
    deleteModel: function(model) {
      var index = this.models.indexOf(model);
      this.models.splice(index, 1);
      return model;
    },
    clearModels: function() {
      this.models.length = 0;
    }
  }, {});
  $Catwalk.Collection = CatwalkCollection;
})(window.Catwalk, window.Object);

"use strict";
(function($window, $Catwalk) {
  "use strict";
  var CatwalkTypecast = function CatwalkTypecast() {};
  ($traceurRuntime.createClass)(CatwalkTypecast, {string: function(value) {
      return (function(value) {
        return $window.String(value);
      });
    }}, {});
  $Catwalk.Typecast = CatwalkTypecast;
})(window, window.Catwalk);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhdHdhbGsuanMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvMSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8yIiwiQ29sbGVjdGlvbi5qcyIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xNCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xMyIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci80IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzEyIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvOSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci82IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzciLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvOCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xMCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci81IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzExIiwiVHlwZWNhc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxBQUFDLFNBQVMsT0FBTTtBQUVaLGFBQVcsQ0FBQztBQ0ZoQixBQUFJLElBQUEsVURTQSxTQUFNLFFBQU0sQ0FNRyxBQUFDLENBQUU7QUFDVixPQUFHLFNBQVMsRUFBSSxJQUFJLENBQUEsT0FBTSxRQUFRLFNBQVMsQUFBQyxFQUFDLENBQUM7RUNoQmxCLEFEaUJoQyxDQ2pCZ0M7QUNBeEMsRUFBQyxlQUFjLFlBQVksQ0FBQyxBQUFDLFdGeUJyQixnQkFBZSxDQUFmLFVBQWlCLElBQUcsQ0FBRyxDQUFBLFVBQVMsQ0FBRztBQUMvQixXQUFPLElBQUksQ0FBQSxPQUFN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QztBQ0F4QyxFQUFDLGVBQWMsWUFBWSxDQUFDLEFBQUMsbUJjZ0JyQixNQUFLLENBQUwsVUFBTyxLQUFJO0FBRVAsYUFBTyxTQUFBLEtBQUksQ0FBSztBQUNaLGFBQU8sQ0FBQSxPQUFNLE9BQU8sQUFBQyxDQUFDLEtBQUksQ0FBQyxDQUFDO01BQ2hDLEVBQUM7SUFFTCxNZHRCNkU7QWMyQmpGLFNBQU8sU0FBUyxFQUFJLGdCQUFjLENBQUM7QUFFdkMsQ0FBQyxBQUFDLENBQUMsTUFBSyxDQUFHLENBQUEsTUFBSyxRQUFRLENBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImNhdHdhbGsuZXM1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCR3aW5kb3cpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIENhdHdhbGtcbiAgICAgKiBAYXV0aG9yIEFkYW0gVGltYmVybGFrZVxuICAgICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9XaWxkaG9uZXkvQ2F0d2Fsay5qc1xuICAgICAqL1xuICAgIGNsYXNzIENhdHdhbGsge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHJldHVybiB7Q2F0d2Fsa31cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy50eXBlY2FzdCA9IG5ldyAkd2luZG93LkNhdHdhbGsuVHlwZWNhc3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIGNyZWF0ZUNvbGxlY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICAgICAgICogQHJldHVybiB7d2luZG93LkNhdHdhbGsuQ29sbGVjdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNvbGxlY3Rpb24obmFtZSwgcHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyAkd2luZG93LkNhdHdhbGsuQ29sbGVjdGlvbihuYW1lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gRXhwb3NlIHRoZSBgQ2F0d2Fsa2AgY2xhc3MuXG4gICAgJHdpbmRvdy5DYXR3YWxrID0gQ2F0d2FsaztcblxufSkod2luZG93KTsiLCJ2YXIgJF9fcGxhY2Vob2xkZXJfXzAgPSAkX19wbGFjZWhvbGRlcl9fMSIsIigkdHJhY2V1clJ1bnRpbWUuY3JlYXRlQ2xhc3MpKCRfX3BsYWNlaG9sZGVyX18wLCAkX19wbGFjZWhvbGRlcl9fMSwgJF9fcGxhY2Vob2xkZXJfXzIpIiwiKGZ1bmN0aW9uKCRDYXR3YWxrLCAkb2JqZWN0KSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdGFudCBDQVRXQUxLX1BST1BFUlRZXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBjb25zdCBDQVRXQUxLX1BST1BFUlRZID0gJ19fY2F0d2Fsa0lkJztcblxuICAgIC8qKlxuICAgICAqIEBjbGFzcyBDYXR3YWxrXG4gICAgICogQGF1dGhvciBBZGFtIFRpbWJlcmxha2VcbiAgICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vV2lsZGhvbmV5L0NhdHdhbGsuanNcbiAgICAgKi9cbiAgICBjbGFzcyBDYXR3YWxrQ29sbGVjdGlvbiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZXRob2QgY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGJsdWVwcmludFxuICAgICAgICAgKiBAcmV0dXJuIHtDYXR3YWxrQ29sbGVjdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWUsIGJsdWVwcmludCkge1xuICAgICAgICAgICAgdGhpcy5pZCAgICAgICAgID0gMDtcbiAgICAgICAgICAgIHRoaXMubmFtZSAgICAgICA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLm1vZGVscyAgICAgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50ICA9ICRvYmplY3QuZnJlZXplKGJsdWVwcmludCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBnZXRNb2RlbHNcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgKiBAZ2VuZXJhdG9yXG4gICAgICAgICAqL1xuICAgICAgICAqZ2V0TW9kZWxzKCkge1xuXG4gICAgICAgICAgICBmb3IgKGxldCBtb2RlbCBvZiB0aGlzLm1vZGVscykge1xuICAgICAgICAgICAgICAgIHlpZWxkIG1vZGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBhZGRNb2RlbFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgICBhZGRNb2RlbChwcm9wZXJ0aWVzID0ge30pIHtcblxuICAgICAgICAgICAgbGV0IG1vZGVsID0ge307XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuaXRlcmF0ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuaXRlcmF0ZUJsdWVwcmludChtb2RlbCk7XG4gICAgICAgICAgICBtb2RlbFtDQVRXQUxLX1BST1BFUlRZXSA9ICsrdGhpcy5pZDtcblxuICAgICAgICAgICAgLy8gTWFrZSB0aGUgbW9kZWwgaW1tdXRhYmxlLCBhbmQgdGhlbiBhZGQgaXQgdG8gdGhlIGFycmF5LlxuICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaCgkb2JqZWN0LmZyZWV6ZShtb2RlbCkpO1xuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzcG9uc2libGUgZm9yIGl0ZXJhdGluZyBvdmVyIHRoZSBibHVlcHJpbnQgdG8gZGV0ZXJtaW5lIGlmIGFueSBwcm9wZXJ0aWVzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqIGZyb20gdGhlIGN1cnJlbnQgbW9kZWwsIHRoYXQgaGF2ZSBiZWVuIGRlZmluZWQgaW4gdGhlIGJsdWVwcmludCBhbmQgdGhlcmVmb3JlIHNob3VsZCBiZVxuICAgICAgICAgKiBwcmVzZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWV0aG9kIGl0ZXJhdGVCbHVlcHJpbnRcbiAgICAgICAgICogQHBhcmFtIG1vZGVsIHtPYmplY3R9XG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGl0ZXJhdGVCbHVlcHJpbnQobW9kZWwpIHtcblxuICAgICAgICAgICAgJG9iamVjdC5rZXlzKHRoaXMuYmx1ZXByaW50KS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWxbcHJvcGVydHldID09PSAndW5kZWZpbmVkJykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eUhhbmRsZXIgPSB0aGlzLmJsdWVwcmludFtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XSAgICAgPSBwcm9wZXJ0eUhhbmRsZXIoJycpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzcG9uc2libGUgZm9yIGl0ZXJhdGluZyBvdmVyIHRoZSBwYXNzZWQgaW4gbW9kZWwgcHJvcGVydGllcyB0byBlbnN1cmUgdGhleSdyZSBpbiB0aGUgYmx1ZXByaW50LFxuICAgICAgICAgKiBhbmQgdHlwZWNhc3RpbmcgdGhlIHByb3BlcnRpZXMgYmFzZWQgb24gdGhlIGRlZmluZSBibHVlcHJpbnQgZm9yIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZXRob2QgaXRlcmF0ZVByb3BlcnRpZXNcbiAgICAgICAgICogQHBhcmFtIHByb3BlcnRpZXMge09iamVjdH1cbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgaXRlcmF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSB7fTtcblxuICAgICAgICAgICAgJG9iamVjdC5rZXlzKHByb3BlcnRpZXMpLmZvckVhY2gocHJvcGVydHkgPT4ge1xuXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlICAgICAgICAgICA9IHByb3BlcnRpZXNbcHJvcGVydHldLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eUhhbmRsZXIgPSB0aGlzLmJsdWVwcmludFtwcm9wZXJ0eV07XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5SGFuZGxlciA9PT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0eSBkb2Vzbid0IGJlbG9uZyBpbiB0aGUgbW9kZWwgYmVjYXVzZSBpdCdzIG5vdCBpbiB0aGUgYmx1ZXByaW50LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5SGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFR5cGVjYXN0IHByb3BlcnR5IHRvIHRoZSBkZWZpbmVkIHR5cGUuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcGVydHlIYW5kbGVyKHZhbHVlKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBkZWxldGVNb2RlbFxuICAgICAgICAgKiBAcGFyYW0gbW9kZWwge09iamVjdH1cbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlTW9kZWwobW9kZWwpIHtcblxuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tb2RlbHMuaW5kZXhPZihtb2RlbCk7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBjbGVhck1vZGVsc1xuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJNb2RlbHMoKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5sZW5ndGggPSAwO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBFeHBvc2UgdGhlIGBDYXR3YWxrLkNvbGxlY3Rpb25gIHByb3BlcnR5LlxuICAgICRDYXR3YWxrLkNvbGxlY3Rpb24gPSBDYXR3YWxrQ29sbGVjdGlvbjtcblxufSkod2luZG93LkNhdHdhbGssIHdpbmRvdy5PYmplY3QpOyIsIiR0cmFjZXVyUnVudGltZS5pbml0R2VuZXJhdG9yRnVuY3Rpb24oJF9fcGxhY2Vob2xkZXJfXzApIiwicmV0dXJuICRfX3BsYWNlaG9sZGVyX18wKFxuICAgICAgICAgICAgICAkX19wbGFjZWhvbGRlcl9fMSxcbiAgICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzIsIHRoaXMpOyIsIiR0cmFjZXVyUnVudGltZS5jcmVhdGVHZW5lcmF0b3JJbnN0YW5jZSIsImZ1bmN0aW9uKCRjdHgpIHtcbiAgICAgIHdoaWxlICh0cnVlKSAkX19wbGFjZWhvbGRlcl9fMFxuICAgIH0iLCJcbiAgICAgICAgZm9yICh2YXIgJF9fcGxhY2Vob2xkZXJfXzAgPVxuICAgICAgICAgICAgICAgICAkX19wbGFjZWhvbGRlcl9fMVtTeW1ib2wuaXRlcmF0b3JdKCksXG4gICAgICAgICAgICAgICAgICRfX3BsYWNlaG9sZGVyX18yO1xuICAgICAgICAgICAgICEoJF9fcGxhY2Vob2xkZXJfXzMgPSAkX19wbGFjZWhvbGRlcl9fNC5uZXh0KCkpLmRvbmU7ICkge1xuICAgICAgICAgICRfX3BsYWNlaG9sZGVyX181O1xuICAgICAgICAgICRfX3BsYWNlaG9sZGVyX182O1xuICAgICAgICB9IiwiJGN0eC5zdGF0ZSA9ICgkX19wbGFjZWhvbGRlcl9fMCkgPyAkX19wbGFjZWhvbGRlcl9fMSA6ICRfX3BsYWNlaG9sZGVyX18yO1xuICAgICAgICBicmVhayIsIiRjdHgucHVzaFRyeShcbiAgICAgICAgICAgICRfX3BsYWNlaG9sZGVyX18wLFxuICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzEpOyIsIiRjdHgucG9wVHJ5KCk7IiwiXG4gICAgICAgICAgICAgICRjdHgucG9wVHJ5KCk7XG4gICAgICAgICAgICAgICRfX3BsYWNlaG9sZGVyX18wID0gJGN0eC5zdG9yZWRFeGNlcHRpb247IiwicmV0dXJuICRfX3BsYWNlaG9sZGVyX18wIiwiJGN0eC5tYXliZVRocm93KCkiLCJyZXR1cm4gJGN0eC5lbmQoKSIsIihmdW5jdGlvbigkd2luZG93LCAkQ2F0d2Fsaykge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3MgQ2F0d2Fsa1xuICAgICAqIEBhdXRob3IgQWRhbSBUaW1iZXJsYWtlXG4gICAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL1dpbGRob25leS9DYXR3YWxrLmpzXG4gICAgICovXG4gICAgY2xhc3MgQ2F0d2Fsa1R5cGVjYXN0IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBzdHJpbmdcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIHtTdHJpbmd8Qm9vbGVhbnxOdW1iZXJ9XG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHN0cmluZyh2YWx1ZSkge1xuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAkd2luZG93LlN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8vIEV4cG9zZSB0aGUgYENhdHdhbGsuQ29sbGVjdGlvbmAgcHJvcGVydHkuXG4gICAgJENhdHdhbGsuVHlwZWNhc3QgPSBDYXR3YWxrVHlwZWNhc3Q7XG5cbn0pKHdpbmRvdywgd2luZG93LkNhdHdhbGspOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==