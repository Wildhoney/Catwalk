"use strict";
(function($window) {
  "use strict";
  var collections = [];
  var Catwalk = function Catwalk() {
    this.typecast = new $window.Catwalk.Typecast();
  };
  ($traceurRuntime.createClass)(Catwalk, {
    createCollection: function(name, properties) {
      var collection = new $window.Catwalk.Collection(name, properties);
      collections[name] = collection;
      return collection;
    },
    collection: function(name) {
      return collections[name];
    },
    throwException: function(message) {
      throw ("Catwalk.js: " + message + ".");
    }
  }, {});
  $window.Catwalk = Catwalk;
})(window);

"use strict";
(function($Catwalk, $object) {
  "use strict";
  var CATWALK_PROPERTY = '__catwalkId';
  var CatwalkCollection = function CatwalkCollection() {
    var name = arguments[0] !== (void 0) ? arguments[0] : '';
    var blueprint = arguments[1] !== (void 0) ? arguments[1] : {};
    if (name === '') {
      this.throwException('You must specify a name for the collection');
    }
    this.id = 0;
    this.name = name;
    this.models = [];
    this.blueprint = $object.freeze(blueprint);
  };
  ($traceurRuntime.createClass)(CatwalkCollection, {
    getModels: $traceurRuntime.initGeneratorFunction(function $__4() {
      var $__2,
          $__3,
          model;
      return $traceurRuntime.createGeneratorInstance(function($ctx) {
        while (true)
          switch ($ctx.state) {
            case 0:
              $__2 = this.models[Symbol.iterator]();
              $ctx.state = 14;
              break;
            case 14:
              $ctx.state = (!($__3 = $__2.next()).done) ? 9 : -2;
              break;
            case 9:
              $ctx.pushTry(7, null);
              $ctx.state = 10;
              break;
            case 10:
              throw undefined;
              $ctx.state = 12;
              break;
            case 12:
              $ctx.popTry();
              $ctx.state = 14;
              break;
            case 7:
              $ctx.popTry();
              model = $ctx.storedException;
              $ctx.state = 5;
              break;
            case 5:
              model = $__3.value;
              $ctx.state = 6;
              break;
            case 6:
              $ctx.state = 2;
              return model;
            case 2:
              $ctx.maybeThrow();
              $ctx.state = 14;
              break;
            default:
              return $ctx.end();
          }
      }, $__4, this);
    }),
    createModel: function() {
      var properties = arguments[0] !== (void 0) ? arguments[0] : {};
      var model = {};
      model = this.iterateProperties(properties);
      model = this.iterateBlueprint(model);
      model[CATWALK_PROPERTY] = ++this.id;
      this.models.push($object.freeze(model));
      return model;
    },
    iterateBlueprint: function(model) {
      var $__0 = this;
      $object.keys(this.blueprint).forEach((function(property) {
        if (typeof model[property] === 'undefined') {
          try {
            throw undefined;
          } catch (propertyHandler) {
            {
              propertyHandler = $__0.blueprint[property];
              model[property] = propertyHandler();
            }
          }
        }
      }));
      return model;
    },
    iterateProperties: function(properties) {
      var $__0 = this;
      var model = {};
      $object.keys(properties).forEach((function(property) {
        var value = properties[property],
            propertyHandler = $__0.blueprint[property];
        if (typeof propertyHandler === 'undefined') {
          return;
        }
        if (typeof propertyHandler === 'function') {
          value = propertyHandler(value);
        }
        model[property] = value;
      }));
      return model;
    },
    deleteModel: function(model) {
      var index = this.models.indexOf(model);
      this.models.splice(index, 1);
      return model;
    },
    clearModels: function() {
      this.models.length = 0;
    }
  }, {}, $Catwalk);
  $Catwalk.Collection = CatwalkCollection;
})(window.Catwalk, window.Object);

"use strict";
(function($window, $Catwalk) {
  "use strict";
  var CatwalkTypecast = function CatwalkTypecast() {};
  ($traceurRuntime.createClass)(CatwalkTypecast, {
    string: function() {
      return function typecastString() {
        var value = arguments[0] !== (void 0) ? arguments[0] : '';
        return $window.String(value);
      };
    },
    number: function() {
      return function typecastNumber() {
        var value = arguments[0] !== (void 0) ? arguments[0] : 0;
        return $window.parseInt(value);
      };
    },
    custom: function(typecastFn) {
      return typecastFn;
    }
  }, {});
  $Catwalk.Typecast = CatwalkTypecast;
})(window, window.Catwalk);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhdHdhbGsuanMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvMSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8yIiwiQ29sbGVjdGlvbi5qcyIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8zIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzE1IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzE0IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzUiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvMTMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvNCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xMCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci83IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzgiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvOSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xMSIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci82IiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzEyIiwiVHlwZWNhc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxBQUFDLFNBQVMsT0FBTTtBQUVaLGFBQVcsQ0FBQztBQU1aLEFBQUksSUFBQSxDQUFBLFdBQVUsRUFBSSxHQUFDLENBQUM7QUNSeEIsQUFBSSxJQUFBLFVEZUEsU0FBTSxRQUFNLENBTUcsQUFBQyxDQUFFO0FBQ1YsT0FBRyxTQUFTLEVBQUksSUFBSSxDQUFBLE9BQU0sUUFBUSxTQUFTLEFBQUMsRUFBQyxDQUFDO0VDdEJsQixBRHVCaEMsQ0N2QmdDO0FDQXhDLEVBQUMsZUFBYyxZQUFZLENBQUMs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ImNhdHdhbGsuZXM1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCR3aW5kb3cpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IGNvbGxlY3Rpb25zXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHZhciBjb2xsZWN0aW9ucyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIENhdHdhbGtcbiAgICAgKiBAYXV0aG9yIEFkYW0gVGltYmVybGFrZVxuICAgICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9XaWxkaG9uZXkvQ2F0d2Fsay5qc1xuICAgICAqL1xuICAgIGNsYXNzIENhdHdhbGsge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHJldHVybiB7Q2F0d2Fsa31cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy50eXBlY2FzdCA9IG5ldyAkd2luZG93LkNhdHdhbGsuVHlwZWNhc3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIGNyZWF0ZUNvbGxlY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICAgICAgICogQHJldHVybiB7Q2F0d2Fsay5Db2xsZWN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ29sbGVjdGlvbihuYW1lLCBwcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uICAgID0gbmV3ICR3aW5kb3cuQ2F0d2Fsay5Db2xsZWN0aW9uKG5hbWUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV0gPSBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIGNvbGxlY3Rpb25cbiAgICAgICAgICogQHBhcmFtIG5hbWUge1N0cmluZ31cbiAgICAgICAgICogQHJldHVybiB7Q2F0d2Fsay5Db2xsZWN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgY29sbGVjdGlvbihuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbnNbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCB0aHJvd0V4Y2VwdGlvblxuICAgICAgICAgKiBAdGhyb3cgRXhjZXB0aW9uXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aHJvd0V4Y2VwdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBgQ2F0d2Fsay5qczogJHttZXNzYWdlfS5gO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBFeHBvc2UgdGhlIGBDYXR3YWxrYCBjbGFzcy5cbiAgICAkd2luZG93LkNhdHdhbGsgPSBDYXR3YWxrO1xuXG59KSh3aW5kb3cpOyIsInZhciAkX19wbGFjZWhvbGRlcl9fMCA9ICRfX3BsYWNlaG9sZGVyX18xIiwiKCR0cmFjZXVyUnVudGltZS5jcmVhdGVDbGFzcykoJF9fcGxhY2Vob2xkZXJfXzAsICRfX3BsYWNlaG9sZGVyX18xLCAkX19wbGFjZWhvbGRlcl9fMikiLCIoZnVuY3Rpb24oJENhdHdhbGssICRvYmplY3QpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0YW50IENBVFdBTEtfUFJPUEVSVFlcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGNvbnN0IENBVFdBTEtfUFJPUEVSVFkgPSAnX19jYXR3YWxrSWQnO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIENhdHdhbGtcbiAgICAgKiBAYXV0aG9yIEFkYW0gVGltYmVybGFrZVxuICAgICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9XaWxkaG9uZXkvQ2F0d2Fsay5qc1xuICAgICAqL1xuICAgIGNsYXNzIENhdHdhbGtDb2xsZWN0aW9uIGV4dGVuZHMgJENhdHdhbGsge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBibHVlcHJpbnRcbiAgICAgICAgICogQHJldHVybiB7Q2F0d2Fsa0NvbGxlY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIGJsdWVwcmludCA9IHt9KSB7XG5cbiAgICAgICAgICAgIGlmIChuYW1lID09PSAnJykge1xuXG4gICAgICAgICAgICAgICAgLy8gTm8gYHVuZGVmaW5lZGAgdmFsdWVzIGFsbG93ZWQhXG4gICAgICAgICAgICAgICAgdGhpcy50aHJvd0V4Y2VwdGlvbignWW91IG11c3Qgc3BlY2lmeSBhIG5hbWUgZm9yIHRoZSBjb2xsZWN0aW9uJyk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pZCAgICAgICAgID0gMDtcbiAgICAgICAgICAgIHRoaXMubmFtZSAgICAgICA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLm1vZGVscyAgICAgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50ICA9ICRvYmplY3QuZnJlZXplKGJsdWVwcmludCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBnZXRNb2RlbHNcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgKiBAZ2VuZXJhdG9yXG4gICAgICAgICAqL1xuICAgICAgICAqZ2V0TW9kZWxzKCkge1xuXG4gICAgICAgICAgICBmb3IgKGxldCBtb2RlbCBvZiB0aGlzLm1vZGVscykge1xuICAgICAgICAgICAgICAgIHlpZWxkIG1vZGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBjcmVhdGVNb2RlbFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgICBjcmVhdGVNb2RlbChwcm9wZXJ0aWVzID0ge30pIHtcblxuICAgICAgICAgICAgbGV0IG1vZGVsID0ge307XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuaXRlcmF0ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuaXRlcmF0ZUJsdWVwcmludChtb2RlbCk7XG4gICAgICAgICAgICBtb2RlbFtDQVRXQUxLX1BST1BFUlRZXSA9ICsrdGhpcy5pZDtcblxuICAgICAgICAgICAgLy8gTWFrZSB0aGUgbW9kZWwgaW1tdXRhYmxlLCBhbmQgdGhlbiBhZGQgaXQgdG8gdGhlIGFycmF5LlxuICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaCgkb2JqZWN0LmZyZWV6ZShtb2RlbCkpO1xuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzcG9uc2libGUgZm9yIGl0ZXJhdGluZyBvdmVyIHRoZSBibHVlcHJpbnQgdG8gZGV0ZXJtaW5lIGlmIGFueSBwcm9wZXJ0aWVzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqIGZyb20gdGhlIGN1cnJlbnQgbW9kZWwsIHRoYXQgaGF2ZSBiZWVuIGRlZmluZWQgaW4gdGhlIGJsdWVwcmludCBhbmQgdGhlcmVmb3JlIHNob3VsZCBiZVxuICAgICAgICAgKiBwcmVzZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWV0aG9kIGl0ZXJhdGVCbHVlcHJpbnRcbiAgICAgICAgICogQHBhcmFtIG1vZGVsIHtPYmplY3R9XG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGl0ZXJhdGVCbHVlcHJpbnQobW9kZWwpIHtcblxuICAgICAgICAgICAgJG9iamVjdC5rZXlzKHRoaXMuYmx1ZXByaW50KS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWxbcHJvcGVydHldID09PSAndW5kZWZpbmVkJykge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0eUhhbmRsZXIgPSB0aGlzLmJsdWVwcmludFtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XSAgICAgPSBwcm9wZXJ0eUhhbmRsZXIoKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc3BvbnNpYmxlIGZvciBpdGVyYXRpbmcgb3ZlciB0aGUgcGFzc2VkIGluIG1vZGVsIHByb3BlcnRpZXMgdG8gZW5zdXJlIHRoZXkncmUgaW4gdGhlIGJsdWVwcmludCxcbiAgICAgICAgICogYW5kIHR5cGVjYXN0aW5nIHRoZSBwcm9wZXJ0aWVzIGJhc2VkIG9uIHRoZSBkZWZpbmUgYmx1ZXByaW50IGZvciB0aGUgY3VycmVudCBjb2xsZWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWV0aG9kIGl0ZXJhdGVQcm9wZXJ0aWVzXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzIHtPYmplY3R9XG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGl0ZXJhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpIHtcblxuICAgICAgICAgICAgdmFyIG1vZGVsID0ge307XG5cbiAgICAgICAgICAgICRvYmplY3Qua2V5cyhwcm9wZXJ0aWVzKS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcblxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSAgICAgICAgICAgPSBwcm9wZXJ0aWVzW3Byb3BlcnR5XSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlIYW5kbGVyID0gdGhpcy5ibHVlcHJpbnRbcHJvcGVydHldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eUhhbmRsZXIgPT09ICd1bmRlZmluZWQnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvcGVydHkgZG9lc24ndCBiZWxvbmcgaW4gdGhlIG1vZGVsIGJlY2F1c2UgaXQncyBub3QgaW4gdGhlIGJsdWVwcmludC5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eUhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUeXBlY2FzdCBwcm9wZXJ0eSB0byB0aGUgZGVmaW5lZCB0eXBlLlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3BlcnR5SGFuZGxlcih2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZXRob2QgZGVsZXRlTW9kZWxcbiAgICAgICAgICogQHBhcmFtIG1vZGVsIHtPYmplY3R9XG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZU1vZGVsKG1vZGVsKSB7XG5cbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMubW9kZWxzLmluZGV4T2YobW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZXRob2QgY2xlYXJNb2RlbHNcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyTW9kZWxzKCkge1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gRXhwb3NlIHRoZSBgQ2F0d2Fsay5Db2xsZWN0aW9uYCBwcm9wZXJ0eS5cbiAgICAkQ2F0d2Fsay5Db2xsZWN0aW9uID0gQ2F0d2Fsa0NvbGxlY3Rpb247XG5cbn0pKHdpbmRvdy5DYXR3YWxrLCB3aW5kb3cuT2JqZWN0KTsiLCIoJHRyYWNldXJSdW50aW1lLmNyZWF0ZUNsYXNzKSgkX19wbGFjZWhvbGRlcl9fMCwgJF9fcGxhY2Vob2xkZXJfXzEsICRfX3BsYWNlaG9sZGVyX18yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzMpIiwiJHRyYWNldXJSdW50aW1lLmluaXRHZW5lcmF0b3JGdW5jdGlvbigkX19wbGFjZWhvbGRlcl9fMCkiLCJyZXR1cm4gJF9fcGxhY2Vob2xkZXJfXzAoXG4gICAgICAgICAgICAgICRfX3BsYWNlaG9sZGVyX18xLFxuICAgICAgICAgICAgICAkX19wbGFjZWhvbGRlcl9fMiwgdGhpcyk7IiwiJHRyYWNldXJSdW50aW1lLmNyZWF0ZUdlbmVyYXRvckluc3RhbmNlIiwiZnVuY3Rpb24oJGN0eCkge1xuICAgICAgd2hpbGUgKHRydWUpICRfX3BsYWNlaG9sZGVyX18wXG4gICAgfSIsIlxuICAgICAgICBmb3IgKHZhciAkX19wbGFjZWhvbGRlcl9fMCA9XG4gICAgICAgICAgICAgICAgICRfX3BsYWNlaG9sZGVyX18xW1N5bWJvbC5pdGVyYXRvcl0oKSxcbiAgICAgICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzI7XG4gICAgICAgICAgICAgISgkX19wbGFjZWhvbGRlcl9fMyA9ICRfX3BsYWNlaG9sZGVyX180Lm5leHQoKSkuZG9uZTsgKSB7XG4gICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzU7XG4gICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzY7XG4gICAgICAgIH0iLCIkY3R4LnN0YXRlID0gKCRfX3BsYWNlaG9sZGVyX18wKSA/ICRfX3BsYWNlaG9sZGVyX18xIDogJF9fcGxhY2Vob2xkZXJfXzI7XG4gICAgICAgIGJyZWFrIiwiJGN0eC5wdXNoVHJ5KFxuICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzAsXG4gICAgICAgICAgICAkX19wbGFjZWhvbGRlcl9fMSk7IiwiJGN0eC5wb3BUcnkoKTsiLCJcbiAgICAgICAgICAgICAgJGN0eC5wb3BUcnkoKTtcbiAgICAgICAgICAgICAgJF9fcGxhY2Vob2xkZXJfXzAgPSAkY3R4LnN0b3JlZEV4Y2VwdGlvbjsiLCJyZXR1cm4gJF9fcGxhY2Vob2xkZXJfXzAiLCIkY3R4Lm1heWJlVGhyb3coKSIsInJldHVybiAkY3R4LmVuZCgpIiwiKGZ1bmN0aW9uKCR3aW5kb3csICRDYXR3YWxrKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEBjbGFzcyBDYXR3YWxrXG4gICAgICogQGF1dGhvciBBZGFtIFRpbWJlcmxha2VcbiAgICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vV2lsZGhvbmV5L0NhdHdhbGsuanNcbiAgICAgKi9cbiAgICBjbGFzcyBDYXR3YWxrVHlwZWNhc3Qge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWV0aG9kIHN0cmluZ1xuICAgICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHN0cmluZygpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHR5cGVjYXN0U3RyaW5nXG4gICAgICAgICAgICAgKiBAcGFyYW0gW3ZhbHVlPScnXSB7U3RyaW5nfEJvb2xlYW58TnVtYmVyfVxuICAgICAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdHlwZWNhc3RTdHJpbmcodmFsdWUgPSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAkd2luZG93LlN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1ldGhvZCBudW1iZXJcbiAgICAgICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBudW1iZXIoKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQG1ldGhvZCB7QW5vbnltb3VzfVxuICAgICAgICAgICAgICogQHBhcmFtIFt2YWx1ZT0wXSB7U3RyaW5nfEJvb2xlYW58TnVtYmVyfVxuICAgICAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdHlwZWNhc3ROdW1iZXIodmFsdWUgPSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICR3aW5kb3cucGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZXRob2QgY3VzdG9tXG4gICAgICAgICAqIEBwYXJhbSB0eXBlY2FzdEZuIHtGdW5jdGlvbn1cbiAgICAgICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBjdXN0b20odHlwZWNhc3RGbikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVjYXN0Rm47XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8vIEV4cG9zZSB0aGUgYENhdHdhbGsuQ29sbGVjdGlvbmAgcHJvcGVydHkuXG4gICAgJENhdHdhbGsuVHlwZWNhc3QgPSBDYXR3YWxrVHlwZWNhc3Q7XG5cbn0pKHdpbmRvdywgd2luZG93LkNhdHdhbGspOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==